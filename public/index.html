<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luxury Garage | Premium Dealership</title>
    <style>
        :root {
            --dark-matte: #121213;
            --gray-deep: #1c1c1e;
            --gold-accent: #d4af37;
            --text-gray: #a1a1a6;
        }

        body { font-family: 'Inter', sans-serif; background-color: var(--dark-matte); color: #fff; margin: 0; }

        /* HEADER & MENU */
        header { background: #fff; padding: 15px 40px; display: flex; align-items: center; position: sticky; top: 0; z-index: 1000; color: #000; }
        
        .menu-container { position: relative; display: inline-block; cursor: pointer; }
        .menu-btn { display: flex; align-items: center; gap: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; }
        .bar { width: 25px; height: 3px; background: #000; margin: 4px 0; transition: 0.3s; }
        
        .dropdown { 
            display: none; position: absolute; top: 100%; left: 0; background: #fff; 
            min-width: 200px; box-shadow: 0 8px 16px rgba(0,0,0,0.2); border-radius: 0 0 8px 8px;
        }
        .menu-container:hover .dropdown { display: block; }
        .dropdown a { color: #000; padding: 12px 20px; text-decoration: none; display: block; font-size: 0.9rem; }
        .dropdown a:hover { background: #f4f4f4; color: var(--gold-accent); }

        /* HERO GALLERY */
        .hero { height: 70vh; display: flex; background: #000; overflow: hidden; position: relative; }
        .hero-img { width: 100%; height: 100%; object-fit: cover; opacity: 0.7; }
        .hero-info { position: absolute; bottom: 40px; right: 40px; text-align: right; background: rgba(0,0,0,0.5); padding: 20px; border-radius: 4px; border-right: 4px solid var(--gold-accent); }
        .hero-price { font-size: 2.5rem; font-weight: bold; color: var(--gold-accent); }

        /* BRANDS SECTION */
        .brands-bar { padding: 40px; display: flex; justify-content: center; gap: 50px; background: var(--gray-deep); align-items: center; }
        .brand-logo { height: 40px; filter: grayscale(1) brightness(2); cursor: pointer; transition: 0.3s; opacity: 0.6; }
        .brand-logo:hover { filter: grayscale(0) brightness(1); opacity: 1; transform: scale(1.1); }

        /* GRID */
        .container { max-width: 1200px; margin: 40px auto; padding: 0 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 30px; }
        .card { background: var(--gray-deep); border-radius: 12px; overflow: hidden; border: 1px solid #333; transition: 0.3s; }
        .card:hover { border-color: var(--gold-accent); }
    </style>
</head>
<body>

    <header>
        <div class="menu-container">
            <div class="menu-btn">
                <div><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
                <span>Menu</span>
            </div>
            <div class="dropdown">
                <a href="#" onclick="loadFilteredCars('')">View All</a>
                <a href="#" onclick="loadFilteredCars('Cars')">Cars</a>
                <a href="#" onclick="loadFilteredCars('Pickups')">Pickups</a>
                <a href="#" onclick="loadFilteredCars('SUV')">SUV</a>
                <a href="#" onclick="loadFilteredCars('Hybrid & Electric')">Hybrid & Electric</a>
            </div>
        </div>
        <h2 style="margin-left:auto; font-size:1.2rem; letter-spacing:2px;">LUXURY GARAGE</h2>
    </header>

    <section class="hero" id="heroSection">
        <img src="https://images.unsplash.com/photo-1503376763036-066120622c74" class="hero-img" id="heroImg">
        <div class="hero-info">
            <h2 id="heroTitle">Porsche 911 GT3 RS</h2>
            <div class="hero-price" id="heroPrice">US $223,800</div>
            <p id="heroDesc">Dominio absoluto en pista.</p>
        </div>
    </section>

    <div class="brands-bar">
        <img src="https://upload.wikimedia.org/wikipedia/en/thumb/d/df/Porsche_logo.svg/1200px-Porsche_logo.svg.png" class="brand-logo" onclick="loadByBrand('Porsche')">
        <img src="https://upload.wikimedia.org/wikipedia/en/thumb/d/d1/Ferrari-Logo.svg/1200px-Ferrari-Logo.svg.png" class="brand-logo" onclick="loadByBrand('Ferrari')">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/BMW.svg/1200px-BMW.svg.png" class="brand-logo" onclick="loadByBrand('BMW')">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/90/Mercedes-Benz_Logo_2010.svg/1200px-Mercedes-Benz_Logo_2010.svg.png" class="brand-logo" onclick="loadByBrand('Mercedes')">
    </div>

    <div class="container">
        <h3 id="categoryTitle" style="color:var(--gold-accent); text-transform:uppercase; margin-bottom:30px;">Inventario Completo</h3>
        <div id="grid" class="grid"></div>
    </div>

    <script>
        // LÃ³gica de Filtrado Inteligente
        async function loadFilteredCars(category = '', brand = '') {
            let url = '/api/cars?limit=50';
            if (category) url += `&type=${category}`;
            if (brand) url += `&make=${brand}`;

            const res = await fetch(url);
            const response = await res.json();
            
            const grid = document.getElementById('grid');
            grid.innerHTML = '';

            document.getElementById('categoryTitle').innerText = category || brand || "Inventario Completo";

            response.data.forEach(car => {
                const cover = (car.images && car.images.length) ? car.images[0] : '';
                grid.innerHTML += `
                    <div class="card">
                        <img src="${cover}" style="width:100%; height:200px; object-fit:cover;">
                        <div style="padding:20px;">
                            <h4>${car.make} ${car.model}</h4>
                            <div style="color:var(--gold-accent); font-weight:bold;">US $${car.price.toLocaleString()}</div>
                        </div>
                    </div>
                `;
            });
            
            // Si hay autos, actualizar el Hero con el primer resultado
            if(response.data.length > 0) updateHero(response.data[0]);
        }

        function loadByBrand(brand) { loadFilteredCars('', brand); }

        function updateHero(car) {
            document.getElementById('heroImg').src = car.images[0];
            document.getElementById('heroTitle').innerText = `${car.make} ${car.model}`;
            document.getElementById('heroPrice').innerText = `US $${car.price.toLocaleString()}`;
            document.getElementById('heroDesc').innerText = car.description.substring(0, 50) + "...";
        }

        loadFilteredCars(); // Carga inicial
    </script>
</body>
</html>